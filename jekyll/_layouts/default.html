<!DOCTYPE html>
<html dir="ltr" lang="en-GB" id="top">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>{{page.title | capitalize}} - {{site.title}}, Developer</title>
  <meta name="apple-mobile-web-app-title" content="{{site.title}}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  {%- include /meta/preload.html %}
  <link rel="canonical" href="{% if page.url =='/' %}{{site.url | append: '/'}}{% else %}{{page.url | absolute_url}}{% endif %}">
  {% if jekyll.environment == 'staging' -%}
  <meta name="robots" content="noindex">
  {% endif -%}
  {% if page.noindex -%}
  <meta name="robots" content="noindex">
  {% endif -%}  
  {% include /meta/description.html %}
  <meta name="twitter:dnt" content="on">
  <meta name="generator" content="{{ jekyll.version | prepend: 'Jekyll ' }}">
  {% include /meta/device-favicons.html %}
  <link rel="icon" type="image/svg+xml" href="/assets/img/favicon-focus.svg">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="alternate" type="application/atom+xml" title="Blog posts" href="/feed.xml">
</head>
<body {%- if page.collection %} data-collection="{{page.collection}}"{% endif %} class="{{page.layout | slugify}} {{jekyll.environment}}">
  {%- assign active = page.url | remove:'.html' -%}
  {% include /components/svg/index.html %}
  {%- unless page.omit-header -%}
  {% include /partials/navigations/skip.html %}
  {% include /partials/header.html %}     
  {%- endunless -%}
  {% include /partials/main.html %}
  {% include /partials/footer.html %}
  {% if page.has-video %}
  <script>
    window.addEventListener('DOMContentLoaded', (e) => {
        let video = document.querySelector('video'),
            isPaused = false,
            pipActive = false;
        video.addEventListener('playing', (e) => {
          video.setAttribute('data-state', 'playing');
        });
        video.addEventListener('pause', (e) => {
          video.setAttribute('data-state', 'paused');
        });    
        video.addEventListener('enterpictureinpicture', (e) => {
          pipActive = true;
        });
        video.addEventListener('leavepictureinpicture', (e) => {
          pipActive = false; 
          video.play();     
        });
        let observer = new IntersectionObserver((entries, observer) => { 
          entries.forEach(entry => {
            if(entry.intersectionRatio!=1  && !video.paused && pipActive!=true && !document.webkitIsFullScreen){
              video.pause();
              isPaused = true;
              video.setAttribute('data-state', 'paused');
            }
            else if(isPaused && pipActive!=true) {
              video.play();
              isPaused=false;
              video.setAttribute('data-state', 'playing');
            }
          });
        }, {threshold: 1});
        observer.observe(video);
    });  
  </script>
  {% endif %}  
  <script>
    window.addEventListener('DOMContentLoaded', (e) => {
      let svgFavicon = document.querySelectorAll("[type='image/svg+xml']")[0];
      if(navigator.doNotTrack != 0) {
        document.querySelector("html").setAttribute("data-dnt", "true");
      };
      window.addEventListener('blur', (e) => {
        svgFavicon.setAttribute("href", "/assets/img/favicon-blur.svg");
      });
      window.addEventListener('focus', (e) => {
        svgFavicon.setAttribute("href", "/assets/img/favicon-focus.svg");
      });
    });
  </script>  
</body>
</html>